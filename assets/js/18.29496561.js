(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{575:function(t,s,a){t.exports=a.p+"assets/img/vue-life.34a7ccd4.png"},576:function(t,s,a){t.exports=a.p+"assets/img/vue-life.3db5ebe2.jpg"},630:function(t,s,a){"use strict";a.r(s);var n=a(9),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[t._v("最近面试被问到vue从创建一个实例到挂载到底经历了什么，没有回答的特别好，所以来好好梳理、整理一下知识点总结下来。")])]),n("h1",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("相信谈到vue，大家可能都会拍着胸脯说：“vue还不简单，我都用vue开发过xx年、xx个应用、程序了”，但是你真的 "),n("u",[n("strong",[t._v("了解")])]),t._v(" 其底层吗？今天我们就来走进vue，探究vue从创建到销毁经历了什么。")]),t._v(" "),n("p",[t._v("注意⚠️：本文不涉及"),n("b",[n("code",[t._v("keep-alive")])]),t._v("的场景及其生命周期。")]),t._v(" "),n("h1",{attrs:{id:"一、vue生命周期概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、vue生命周期概述"}},[t._v("#")]),t._v(" 一、vue生命周期概述")]),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("生命周期涵义：")]),t._v(" 一个事物从诞生到消亡的过程，就称为生命周期。"),n("br"),t._v(" "),n("strong",[t._v("vue的生命周期：")]),t._v(" 从"),n("code",[t._v("new Vue实例创建")]),t._v("开始 -> "),n("code",[t._v("运行")]),t._v(" -> "),n("code",[t._v("更新")]),t._v(" -> "),n("code",[t._v("销毁")]),t._v(",这一整套被称为vue的生命周期。"),n("br"),t._v(" "),n("strong",[t._v("常见叫法：")]),t._v(" 生命周期、生命周期钩子、生命周期函数、生命周期事件。")])]),t._v(" "),n("h1",{attrs:{id:"二、生命周期的分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、生命周期的分类"}},[t._v("#")]),t._v(" 二、生命周期的分类")]),t._v(" "),n("img",{attrs:{src:a(575),alt:"vue生命周期分类",width:"300"}}),t._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"title"}),n("p",[t._v("下面我们就开始学习吧。")])]),n("h2",{attrs:{id:"创建阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创建阶段"}},[t._v("#")]),t._v(" 创建阶段")]),t._v(" "),n("h3",{attrs:{id:"new-vue-初始化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#new-vue-初始化"}},[t._v("#")]),t._v(" new Vue(初始化)")]),t._v(" "),n("p",[t._v("创建阶段第一件事就是"),n("code",[t._v("new Vue")]),t._v("创建一个"),n("code",[t._v("Vue")]),t._v("实例，以此为入口，"),n("code",[t._v("Vue")]),t._v("只是一个简单的函数，我们来看看"),n("code",[t._v("new Vue")]),t._v("内部都干了些什么呢？内部结构如下：")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Vue")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Vue is a constructor and should be called with the `new` keyword'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("_init")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 嘿，重点在这。")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("p",[t._v("进入了"),n("code",[t._v("_init")]),t._v("函数之后，初始化了一些属性。")]),t._v(" "),n("ol",[n("li",[n("code",[t._v("initLifecycle")]),t._v("：初始化一些属性如parent，children。")]),t._v(" "),n("li",[n("code",[t._v("initEvents")]),t._v("：初始化事件相关的属性，如 _events 等。")]),t._v(" "),n("li",[n("code",[t._v("initRender")]),t._v(": 初始化渲染相关如 $createElement，并且定义了 $attrs 和 $listeners 为浅层响应式属性。\n详细代码如下：")])]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("_init")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" vm "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v("\n    vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mergeOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveConstructorOptions")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constructor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        vm\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_self "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" vm\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initLifecycle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化生命周期")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initEvents")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化事件")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initRender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化渲染")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeCreate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用beforeCreate生命周期钩子函数")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initInjections")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化injections")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化props,methods,data,computed,watch")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initProvide")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化 provide")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'created'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用created生命周期钩子函数")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br")])]),n("h3",{attrs:{id:"beforecreate-第一个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beforecreate-第一个钩子"}},[t._v("#")]),t._v(" beforeCreate(第一个钩子)")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeCreate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[n("code",[t._v("beforeCreate")]),t._v("调用：")]),t._v(" "),n("ol",[n("li",[t._v("初始化 "),n("code",[t._v("Injections")])]),t._v(" "),n("li",[t._v("初始化 "),n("code",[t._v("State")]),t._v(" "),n("ol",[n("li",[t._v("初始化 "),n("code",[t._v("props")])]),t._v(" "),n("li",[t._v("初始化 "),n("code",[t._v("methods")])]),t._v(" "),n("li",[t._v("初始化 "),n("code",[t._v("data")])]),t._v(" "),n("li",[t._v("初始化 "),n("code",[t._v("computed")])]),t._v(" "),n("li",[t._v("初始化 "),n("code",[t._v("watch")])])])]),t._v(" "),n("li",[t._v("初始化 "),n("code",[t._v("Provide")])])]),t._v(" "),n("h3",{attrs:{id:"created-第二个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#created-第二个钩子"}},[t._v("#")]),t._v(" created(第二个钩子)")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'created'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[n("code",[t._v("created")]),t._v("调用:")]),t._v(" "),n("ol",[n("li",[t._v("初始化完成，此时"),n("code",[t._v("vm.$el")]),t._v("还没有被创建；")]),t._v(" "),n("li",[t._v("判断"),n("code",[t._v("vm.$el")]),t._v("是否存在，若不存在，则停止编译；直到调用"),n("code",[t._v("vm.$mount(el)")]),t._v("方法才会继续编译；")]),t._v(" "),n("li",[t._v("若el存在，则判断是否存在"),n("code",[t._v("template")]),t._v("，若存在，将其编译成"),n("code",[t._v("render函数")]),t._v("，若不存在，则将el元素下的内容作为"),n("code",[t._v("template")]),t._v("编译给render函数；")]),t._v(" "),n("li",[t._v("如果存在"),n("code",[t._v("render函数")]),t._v("则首先对其进行编译；")]),t._v(" "),n("li",[t._v("此过程中vm.el被实例化为el选项对应DOM元素，所以在beforeMount中，用vm.el获取到的是挂载DOM的HTML。")])]),t._v(" "),n("h3",{attrs:{id:"beforemount-第三个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beforemount-第三个钩子"}},[t._v("#")]),t._v(" beforeMount(第三个钩子)")]),t._v(" "),n("ol",[n("li",[t._v("此阶段可获取到"),n("code",[t._v("vm.$el")]),t._v(";")]),t._v(" "),n("li",[t._v("此阶段"),n("code",[t._v("vm.$el")]),t._v("完成DOM初始化，但并未挂载到实例上。")])]),t._v(" "),n("h3",{attrs:{id:"mounted-第四个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mounted-第四个钩子"}},[t._v("#")]),t._v(" mounted(第四个钩子)")]),t._v(" "),n("ol",[n("li",[t._v("此阶段"),n("code",[t._v("vm.$el")]),t._v("已完成DOM的挂载与渲染，"),n("code",[t._v("vm.$el")]),t._v("新生成的DOM替换了el选项对应的旧DOM。")])]),t._v(" "),n("h2",{attrs:{id:"运行-更新-阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行-更新-阶段"}},[t._v("#")]),t._v(" 运行（更新）阶段")]),t._v(" "),n("h3",{attrs:{id:"beforeupdate-第五个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beforeupdate-第五个钩子"}},[t._v("#")]),t._v(" beforeUpdate(第五个钩子)")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeUpdate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ol",[n("li",[t._v("当渲染在模板上的data数据更新时，会触发beforeUpdate方法；")]),t._v(" "),n("li",[t._v("更新的数据必须是被渲染在模板上的（el、template、render之一）；")]),t._v(" "),n("li",[t._v("此时view层还未更新；")]),t._v(" "),n("li",[t._v("只有在挂载完成后，才可以触发更新方法（因为挂载完成后才完成模板的渲染，而update则是对模板数据的更新与重新渲染）。")])]),t._v(" "),n("h3",{attrs:{id:"updated-第六个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#updated-第六个钩子"}},[t._v("#")]),t._v(" updated(第六个钩子)")]),t._v(" "),n("ol",[n("li",[t._v("此时完成view层的更新；")]),t._v(" "),n("li",[t._v("当数据变化后，通过render函数生成VNode，通过patchVNode对比前后变化，diff算法进行更新、添加、删除等操作生成真实的DOM节点。")])]),t._v(" "),n("h2",{attrs:{id:"销毁-卸载-阶段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#销毁-卸载-阶段"}},[t._v("#")]),t._v(" 销毁（卸载）阶段")]),t._v(" "),n("h3",{attrs:{id:"beforedestroy-第七个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beforedestroy-第七个钩子"}},[t._v("#")]),t._v(" beforeDestroy(第七个钩子)")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'beforeDestroy'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ol",[n("li",[t._v("之后就会经历一系列的清理逻辑，清除父子关系、watcher 关闭等逻辑；")]),t._v(" "),n("li",[t._v("实例被销毁前调用，此时实例仍可访问")])]),t._v(" "),n("h3",{attrs:{id:"destroyed-第八个钩子"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#destroyed-第八个钩子"}},[t._v("#")]),t._v(" destroyed(第八个钩子)")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'destroyed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ol",[n("li",[t._v("实例被销毁后调用；")]),t._v(" "),n("li",[t._v("完全销毁一个实例。清理它与其它实例的连接，解绑它的全部指令及事件监听器；")]),t._v(" "),n("li",[t._v("Watcher对象从其所在Dep中释放；")]),t._v(" "),n("li",[t._v("并不能清除DOM，仅仅销毁实例")])]),t._v(" "),n("h2",{attrs:{id:"生命周期图示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生命周期图示"}},[t._v("#")]),t._v(" 生命周期图示")]),t._v(" "),n("img",{attrs:{src:a(576),alt:"vue生命周期详细图",width:"300"}}),t._v(" "),n("h1",{attrs:{id:"三、总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、总结"}},[t._v("#")]),t._v(" 三、总结：")]),t._v(" "),n("p",[t._v("到此，我们就完整的回顾了一遍，知道了各个生命周期之间都发生了什么事情，可以让我们在日常开发、编写组件、debug的时候更加的得心应手，能更高效的开发。")])])}),[],!1,null,null,null);s.default=e.exports}}]);